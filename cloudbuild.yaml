steps:
#install node packages
  # - name: 'gcr.io/cloud-builders/npm'
  #   args: ['install'] 

  - name: node:16.10
    entrypoint: npm
    args: ['install']

#build productive files
  # - name: 'gcr.io/cloud-builders/npm'
  #   args: ['run', 'build', '--prod']

  - name: node:16.10
    entrypoint: npm
    args: ['run', 'build', '--prod'] 

#deploy to google cloud app engine
  - name: 'gcr.io/cloud-builders/gcloud'
    args: ['app', 'deploy', '--verbosity=demo']

  # - name: node:16.10
  #   entrypoint: npm
  #   args: ['app', 'deploy', '--version=prod']       